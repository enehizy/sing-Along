{"ast":null,"code":"import cheerio from 'cheerio';\nimport axios from 'axios';\nexport default (async (req, res) => {\n  const {\n    pathtolyrics\n  } = req.query;\n\n  if (pathtolyrics) {\n    try {\n      const result = await axios(`https://genius.com/${pathtolyrics}`);\n      let $ = cheerio.load(result.data);\n      $ = cheerio.load($('.lyrics  > p').html(), {\n        xml: {\n          normalizeWhitespace: true\n        }\n      }); // console.log($.root().text())\n      // return res.json({\n      //   lyrics:`${$.root().text()}`\n      // })\n\n      return res.json({\n        lyrics: `${$.text($.root())}`\n      }); //  return res.json({\n      //     lyrics:`${$('.lyrics  > p').text()}`\n      //   })\n    } catch (e) {\n      return res.json({\n        error: e\n      });\n    }\n  }\n\n  res.json({\n    error: \"Error: you need to give a path\"\n  });\n});","map":{"version":3,"sources":["C:/Users/User/Desktop/projects/sing-along/pages/api/lyrics/[pathtolyrics].js"],"names":["cheerio","axios","req","res","pathtolyrics","query","result","$","load","data","html","xml","normalizeWhitespace","json","lyrics","text","root","e","error"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,gBAAe,OAAOC,GAAP,EAAWC,GAAX,KAAiB;AAC5B,QAAM;AAACC,IAAAA;AAAD,MAAeF,GAAG,CAACG,KAAzB;;AACD,MAAGD,YAAH,EAAgB;AAEf,QAAG;AACD,YAAME,MAAM,GAAC,MAAML,KAAK,CAAE,sBAAqBG,YAAa,EAApC,CAAxB;AACA,UAAIG,CAAC,GAAGP,OAAO,CAACQ,IAAR,CAAaF,MAAM,CAACG,IAApB,CAAR;AACAF,MAAAA,CAAC,GAACP,OAAO,CAACQ,IAAR,CAAaD,CAAC,CAAC,cAAD,CAAD,CAAkBG,IAAlB,EAAb,EAAuC;AACvCC,QAAAA,GAAG,EAAE;AACHC,UAAAA,mBAAmB,EAAE;AADlB;AADkC,OAAvC,CAAF,CAHC,CAOD;AACA;AACA;AACA;;AACC,aAAOT,GAAG,CAACU,IAAJ,CAAS;AACfC,QAAAA,MAAM,EAAE,GAAEP,CAAC,CAACQ,IAAF,CAAOR,CAAC,CAACS,IAAF,EAAP,CAAiB;AADZ,OAAT,CAAP,CAXA,CAcH;AACA;AACA;AACC,KAjBD,CAkBA,OAAMC,CAAN,EAAQ;AACR,aAAQd,GAAG,CAACU,IAAJ,CAAS;AACfK,QAAAA,KAAK,EAACD;AADS,OAAT,CAAR;AAIC;AACD;;AACAd,EAAAA,GAAG,CAACU,IAAJ,CAAS;AAACK,IAAAA,KAAK,EAAC;AAAP,GAAT;AAEH,CA/BD","sourcesContent":["import cheerio from 'cheerio';\r\nimport axios from 'axios';\r\n\r\nexport default async (req,res)=>{\r\n    const {pathtolyrics}=req.query;\r\n   if(pathtolyrics){\r\n       \r\n    try{\r\n      const result=await axios(`https://genius.com/${pathtolyrics}`);\r\n      let $ = cheerio.load(result.data);\r\n      $=cheerio.load($('.lyrics  > p').html(), {\r\n        xml: {\r\n          normalizeWhitespace: true,\r\n        }})\r\n      // console.log($.root().text())\r\n      // return res.json({\r\n      //   lyrics:`${$.root().text()}`\r\n      // })\r\n       return res.json({\r\n        lyrics:`${$.text($.root())}`\r\n      })\r\n    //  return res.json({\r\n    //     lyrics:`${$('.lyrics  > p').text()}`\r\n    //   })\r\n    }\r\n    catch(e){\r\n    return  res.json({\r\n      error:e\r\n     })\r\n      \r\n    }\r\n   }\r\n    res.json({error:\"Error: you need to give a path\"})\r\n    \r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}